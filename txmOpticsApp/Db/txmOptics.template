# Database for EPICS PVS for txm optics control
# This database contains all of the PVs used by the txmoptics base class.

####################################
# Camera and File Plugin PV Prefixes
####################################

record(stringout, "$(P)$(R)CameraPVPrefix")
{
   field(VAL,  "$(CAMERA)")
}

record(stringout, "$(P)$(R)OverlayPluginPVPrefix")
{
   field(VAL,  "$(OVERLAY)")
}

##################################################
# Valves PLC, Shaker and BPM PV Prefix
##################################################


record(stringout, "$(P)$(R)ValvesPLCPVPrefix")
{
   field(VAL,  "$(VALVES_PLC)")
}

record(stringout, "$(P)$(R)ShakerPVPrefix")
{
   field(VAL,  "$(SHAKER)")
}

record(stringout, "$(P)$(R)BPMPVPrefix")
{
   field(VAL,  "$(BPM)")
}

###################
# TXM Optics motors
###################

record(stringout, "$(P)$(R)DiffuserXPVName")
{
   field(VAL,  "$(DIFFUSER_X)")
}

record(stringout, "$(P)$(R)BeamstopXPVName")
{
   field(VAL,  "$(BEAMSTOP_X)")
}

record(stringout, "$(P)$(R)BeamstopYPVName")
{
   field(VAL,  "$(BEAMSTOP_Y)")
}

record(stringout, "$(P)$(R)PinholeXPVName")
{
   field(VAL,  "$(PINHOLE_X)")
}

record(stringout, "$(P)$(R)PinholeYPVName")
{
   field(VAL,  "$(PINHOLE_Y)")
}

record(stringout, "$(P)$(R)CondenserXPVName")
{
   field(VAL,  "$(CONDENSER_X)")
}

record(stringout, "$(P)$(R)CondenserYPVName")
{
   field(VAL,  "$(CONDENSER_Y)")
}

record(stringout, "$(P)$(R)CondenserZPVName")
{
   field(VAL,  "$(CONDENSER_Z)")
}

record(stringout, "$(P)$(R)CondenserPitchPVName")
{
   field(VAL,  "$(CONDENSER_PITCH)")
}

record(stringout, "$(P)$(R)CondenserYawPVName")
{
   field(VAL,  "$(CONDENSER_YAW)")
}

record(stringout, "$(P)$(R)DetectorXPVName")
{
   field(VAL,  "$(DETECTOR_X)")
}

record(stringout, "$(P)$(R)DetectorYPVName")
{
   field(VAL,  "$(DETECTOR_Y)")
}

record(stringout, "$(P)$(R)DetectorZPVName")
{
   field(VAL,  "$(DETECTOR_Z)")
}

record(stringout, "$(P)$(R)ZonePlateXPVName")
{
   field(VAL,  "$(ZONEPLATE_X)")
}

record(stringout, "$(P)$(R)ZonePlateYPVName")
{
   field(VAL,  "$(ZONEPLATE_Y)")
}

record(stringout, "$(P)$(R)ZonePlateZPVName")
{
   field(VAL,  "$(ZONEPLATE_Z)")
}

record(stringout, "$(P)$(R)PhaseRingXPVName")
{
   field(VAL,  "$(PHASERING_X)")
}

record(stringout, "$(P)$(R)PhaseRingYPVName")
{
   field(VAL,  "$(PHASERING_Y)")
}

record(stringout, "$(P)$(R)SampleXPVName")
{
   field(VAL,  "$(SAMPLE_X)")
}

record(stringout, "$(P)$(R)SampleZPVName")
{
   field(VAL,  "$(SAMPLE_Z)")
}

record(stringout, "$(P)$(R)FurnaceXPVName")
{
   field(VAL,  "$(FURNACE_X)")
}

record(stringout, "$(P)$(R)FurnaceYPVName")
{
   field(VAL,  "$(FURNACE_Y)")
}

record(stringout, "$(P)$(R)FurnaceZPVName")
{
   field(VAL,  "$(FURNACE_Z)")
}

###################################
# Optics control via Channel Access
###################################

record(busy, "$(P)$(R)MoveAllIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveAllOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}


record(busy, "$(P)$(R)MoveDiffuserIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveDiffuserOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveBeamstopIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveBeamstopOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MovePinholeIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MovePinholeOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveCondenserIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveCondenserOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveZonePlateIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveZonePlateOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}


record(ao, "$(P)$(R)ZonePlateInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)ZonePlateOutX")
{
   field(PREC,  "3")
}

record(busy, "$(P)$(R)MovePhaseRingIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MovePhaseRingOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveSampleIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveSampleOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveFurnaceIn")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(busy, "$(P)$(R)MoveFurnaceOut")
{
   field(ZNAM, "Done")
   field(ONAM, "Move")
}

record(bo, "$(P)$(R)AllStop")
{
   field(ZNAM, "release")
   field(ONAM, "stop")
}

################
# Optics control
################

record(ao, "$(P)$(R)DiffuserInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)DiffuserOutX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)BeamstopInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)BeamstopOutX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)BeamstopInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)BeamstopOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PinholeInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PinholeOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PinholeInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PinholeOutX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)CondenserInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)CondenserOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)CondenserInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)CondenserOutX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)ZonePlateInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)ZonePlateOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PhaseRingInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)PhaseRingOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)FurnaceInY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)FurnaceOutY")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)SampleInX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)SampleOutX")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)SampleInZ")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)SampleOutZ")
{
   field(PREC,  "3")
}
record(ao, "$(P)$(R)ExposureTimeIn")
{
   field(PREC,  "3")
}

record(ao, "$(P)$(R)ExposureTimeOut")
{
   field(PREC,  "3")
}

###################
# Optics In/Out Use
###################
record(bo, "$(P)$(R)DiffuserInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)BeamstopInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)PinholeInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)CondenserInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)ZonePlateInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)PhaseRingInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)SampleInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(bo, "$(P)$(R)FurnaceInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}


record(bo, "$(P)$(R)ExposureTimeInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}


################################
# TXM SUPPORTING IOC PV Prefixes
################################

record(stringout, "$(P)$(R)IOC0PVPrefix")
{
   field(VAL,  "$(IOC0)")
}

record(stringout, "$(P)$(R)IOC1PVPrefix")
{
   field(VAL,  "$(IOC1)")
}

record(stringout, "$(P)$(R)IOC2PVPrefix")
{
   field(VAL,  "$(IOC2)")
}

record(stringout, "$(P)$(R)IOC3PVPrefix")
{
   field(VAL,  "$(IOC3)")
}

record(stringout, "$(P)$(R)IOC4PVPrefix")
{
   field(VAL,  "$(IOC4)")
}

record(stringout, "$(P)$(R)IOC5PVPrefix")
{
   field(VAL,  "$(IOC5)")
}

########################
# Beam Position Monitors
########################
record(ao, "$(P)$(R)BPMVSetPointIn")
{
    field(PREC, "3")
}

record(ao, "$(P)$(R)BPMHSetPointIn")
{
    field(PREC, "3")
}

record(ao, "$(P)$(R)BPMVSetPointOut")
{
    field(PREC, "3")
}

record(ao, "$(P)$(R)BPMHSetPointOut")
{
    field(PREC, "3")
}

record(bo, "$(P)$(R)BPMSetPointInOutUse")
{
   field(ZNAM, "No")
   field(ONAM, "Yes")
}

record(busy, "$(P)$(R)SaveAllPVs")
{
   field(ZNAM, "Done")
   field(ONAM, "Save")
}

record(busy, "$(P)$(R)LoadAllPVs")
{
   field(ZNAM, "Done")
   field(ONAM, "Load")
}

record(stringout, "$(P)$(R)FileAllPVs")
{
   field(VAL,  "$(FILE_ALL_PVS)")
}

###############
# Energy change
###############
record(stringout, "$(P)$(R)DCMmvtPVName")
{
   field(VAL,  "$(KOHZUMODE)")
}

record(stringout, "$(P)$(R)GAPputEnergyPVName")
{
   field(VAL,  "$(USENERGY)")
}

record(stringout, "$(P)$(R)GAPputEnergyStartPVName")
{
   field(VAL,  "$(USENERGYSTART)")
}

record(stringout, "$(P)$(R)DCMputEnergyPVName")
{
   field(VAL,  "$(BRAGG)")
}
record(stringout, "$(P)$(R)DCMputEnergyRBVPVName")
{
   field(VAL,  "$(BRAGGRBV)")
}
record(stringout, "$(P)$(R)DCMmoveEnergyPVName")
{
   field(VAL,  "$(BRAGGMOVE)")
}
record(busy,"$(P)$(R)EnergySet")
{
   field(ZNAM,"Done")
   field(ZSV, "NO_ALARM")
   field(ONAM,"Set")
   field(OSV, "MINOR")
   field(VAL, "0")
}
record(ao, "$(P)$(R)Energy")
{
   field(PREC,  "4")
   field(VAL,  "8")
   field(HOPR, "14")
   field(LOPR, "6")
}
record(busy, "$(P)$(R)EnergyBusy")
{
   field(ZNAM, "Done")
   field(ONAM, "Busy")
}
record(mbbo, "$(P)$(R)EnergyUseCalibration") {
  field(DTYP, "Raw Soft Channel")
  field(NOBT, "3")
  field(ZRVL, "0x0")
  field(ONVL, "0x1")
  field(ZRST, "Yes")
  field(ONST, "No")
}
record(stringout, "$(P)$(R)EnergyCalibrationFileOne")
{
   field(VAL,  "$(EN_FILE1)")
}
record(stringout, "$(P)$(R)EnergyCalibrationFileTwo")
{
   field(VAL,  "$(EN_FILE2)")
}

######################
# Detector image cross
######################

record(mbbo, "$(P)$(R)CrossSelect") {
  field(DTYP, "Raw Soft Channel")
  field(NOBT, "3")
  field(ZRVL, "0x0")
  field(ONVL, "0x1")
  field(ZRST, "Yes")
  field(ONST, "No")
}

##########################
# Shutter callback for BPM
##########################

record(mbbo, "$(P)$(R)ShutterCallback") {
  field(DTYP, "Raw Soft Channel")
  field(NOBT, "3")
  field(ZRVL, "0x0")
  field(ONVL, "0x1")
  field(ZRST, "Yes")
  field(ONST, "No")
}

record(stringout, "$(P)$(R)ShutterBClosePVName")
{
   field(VAL,  "$(SHUTTER_B_CLOSE)")
}

record(stringout, "$(P)$(R)ShutterBStatusPVName")
{
   field(VAL,  "$(SHUTTER_B_STATUS)")
}

############
# Status PVs
############

record(calcout, "$(P)$(R)Watchdog")
{
   field(SCAN, "1 second")
   field(INPA, "$(P)$(R)Watchdog.VAL NPP")
   field(CALC, "A-1")
   field(OCAL, "A>0?1:0")
   field(OOPT, "On Change")
   field(DOPT, "Use OCAL")
   field(OUT,  "$(P)$(R)ServerRunning PP")
}

record(bi, "$(P)$(R)ServerRunning")
{
   field(ZNAM, "Stopped")
   field(ZSV,  "MAJOR")
   field(ONAM, "Running")
   field(OSV,  "NO_ALARM")
}

record(waveform,"$(P)$(R)TXMOpticsStatus") 
{
   field(FTVL, "UCHAR")
   field(NELM, "256")
}

####################
# Optics information
####################

record(stringout, "$(P)$(R)ScintillatorType")
{
   field(VAL,  "Unknown")
}

record(ao, "$(P)$(R)ScintillatorThickness")
{
   field(PREC,  "0")
}

record(ao, "$(P)$(R)ImagePixelSize")
{
   field(PREC, "2")
   field(EGU,  "microns")
}

record(ao, "$(P)$(R)DetectorPixelSize")
{
   field(PREC, "2")
   field(EGU,  "microns")
}

record(stringout, "$(P)$(R)CameraObjective")
{
   field(VAL,  "Unknown")
}

record(ao, "$(P)$(R)CameraTubeLength")
{
   field(PREC, "0")
   field(EGU,  "mm")
}

record(stringout, "$(P)$(R)ZPDescription")
{
   field(VAL,  "Unknown")
}

record(ao, "$(P)$(R)ZPOutermostZoneWidth")
{
   field(PREC, "0")
   field(EGU,  "nm")
}

record(longout, "$(P)$(R)CropLeft")
{
}

record(longout, "$(P)$(R)CropRight")
{
}

record(longout, "$(P)$(R)CropTop")
{
}

record(longout, "$(P)$(R)CropBottom")
{
}

record(busy, "$(P)$(R)Crop")
{
   field(ZNAM, "Done")
   field(ONAM, "Crop")
}
